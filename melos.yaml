name: flex_form

packages:
  - ./example
  - .

scripts:
  analyze:
    run: |
      melos exec -c 1 -- \
        'flutter analyze . --fatal-infos'
    description: |
      Run `flutter analyze` in all packages.

  lint:all:
    run: melos run analyze
    description: Run all static analysis checks.

  test:
    run: |
      melos exec -c 1 --fail-fast -- \
        'flutter test --no-pub'
    description: Run `flutter test` for all packages.

  test:select:
    run: |
      melos exec -- 'flutter test'
    packageFilters:
      scope: '*'

  build:
    run: |
      melos run build:form \
      && melos run build:form-demo

  build:form:
    run: |
      melos exec --fail-fast --scope='flex_form' -- \
        'flutter pub get && flutter pub run build_runner build --delete-conflicting-outputs'

  clean-build:form:
    run: |
      melos exec --fail-fast --scope='flex_form' 'flutter clean' \
      && melos run build:form

  build:form-demo:
    run: |
      melos exec --fail-fast --scope='flex_form_demo' -- \
        'flutter pub get && flutter pub run build_runner build --delete-conflicting-outputs'

  clean-build:form-demo:
    run: |
      melos exec --fail-fast --scope='flex_form_demo' 'flutter clean' \
      && melos run build:form-demo

  run:demo:
    run: |
      melos exec --fail-fast --scope='flex_form_demo' \
       'flutter run -d chrome'
